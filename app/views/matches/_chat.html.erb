<div class="chat-header"><h4>Chat</h4></div>
<div class="messages">
  <% @match.messages.each do |message| %>
    <%= render "messages/message", message: message %>
  <% end %>
</div>
<div id="create-message">
  <%= simple_form_for [ @match, @message ], method: :get, remote: true do |f| %>
    <%= f.input :content, label: false %>
  <% end %>
</div>

<% content_for :after_js do %>
  <script>
    App['match_<%= @match.id %>'] = App.cable.subscriptions.create(
      { channel: 'MatchesChannel', match_id: <%= @match.id %> },
      { received: (data) => console.log(data) }
    )
  </script>
<% end %>
