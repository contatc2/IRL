<div class="top_page">
  <p class="mx-3">Create a Match </p>
  <div class="d-flex justify-content-center">
    <div>
      <%= image_tag "lock.svg", class: "mb-3", alt: "data protection", style: 'height:auto;width:100px;' %>
    </div>
  </div>
</div>
<!-- create @matchable_friends for @match_one, removing @match_one and users already matched -->
<div class="row justify-content-center">
  <div class="col-xs-8 col-sm-6">
    <% @match_one = User.find(params[:match_one]) %>
    <% @friends.delete(@match_one) %>
    <% @already_matched = Match.where(match_one: @match_one, helper: current_user).map(&:match_two) + Match.where(match_two: @match_one, helper: current_user).map(&:match_one) %>
    <% @friends_matchable = @friends - @already_matched %>
    <% if @friends_matchable.present? %>
      <div class="form2 my-3 text-center">
        <div class="form-inputs">
          <%= simple_form_for @match do |f| %>
            <%= f.hidden_field :match_one_id, value: @match_one.id %>
            <%= f.association :match_two, label: 'Who would be the perfect match?', label_method: :full_name, collection: @friends_matchable %>
            <%= f.input :intro_message, placeholder: "I thought you would be great for each other..." %>
          </div>
          <%= f.submit class:"main_action_button mb-0" %>
        <% end %>
      </div>
    <% end %>
    <div class="mt-3 text-center">
      <p class="mb-0">The perfect match is not on IRL yet?</p>
      <p>Invite them to join and give a glimpse to
        <%= @match_one.first_name.capitalize %>:</p>
      <div class="form2 my-3 text-center">
        <div class="form-inputs">
          <%= simple_form_for @pseudo_match do |f| %>
            <%= f.hidden_field :match_one_id, value: @match_one.id %>
            <%= f.input :match_two_first_name, label: 'Who would be the perfect match?', placeholder: "Enter the match's first name" %>
            <%= f.input :match_two_email, label: false, placeholder: "Enter the match's email", hint: "your friend will get an invitation", class: "mb-0" %>
            <div class="d-flex">
              <p class="my-2 mr-2">Find them on:</p>
              <%= link_to 'https://www.facebook.com/', target: :_blank, class:"match_social_urls" do %>
                <i class="fab fa-facebook"></i>
              <% end %>
              <%= link_to 'https://www.linkedin.com/', target: :_blank, class:"match_social_urls" do %>
                <i class="fab fa-linkedin"></i>
              <% end %>
            </div>
            <div class="d-flex justify-content-center align-items-center mt-1">
              <%= f.input :match_two_picture, input_html: { class: 'd-none', id: 'photo-input'}, label_html: { class: 'second_action_button'}, label: 'Upload picture', hint_html: { id: 'photo-hint'}, hint: 'Add a screen shot of their social media profile' %>
              <%= image_tag "", width: 100, height: 100, class: "ml-3 mb-3 d-none", id: "photo-preview" %>
            </div>
            <%= f.input :intro_message, placeholder: "I thought you would be great for each other..." %>
          </div>
          <%= f.submit 'Create match and invite your friend', class:"main_action_button mb-0" %>
        <% end %>
      </div>
    </div>
  </div>
</div>